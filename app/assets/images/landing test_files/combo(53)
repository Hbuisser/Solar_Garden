YUI.add("hermes-template-fluid-modal-nav-bar",function(a,e){var n=a.Template.Handlebars.revive({1:function(a,e,n,l,t){var r;return null!=(r=n.unless.call(null!=e?e:{},null!=e?e.disabled:e,{name:"unless",hash:{},fn:a.program(2,t,0),inverse:a.noop,data:t}))?r:""},2:function(a,e,n,l,t){var r,u,i=null!=e?e:{},s=n.helperMissing,o=a.escapeExpression;return'\t\t\t<li data-id="'+o("function"==typeof(u=null!=(u=n.id||(null!=e?e.id:e))?u:s)?u.call(i,{name:"id",hash:{},data:t}):u)+'" data-value="'+o("function"==typeof(u=null!=(u=n.value||(null!=e?e.value:e))?u:s)?u.call(i,{name:"value",hash:{},data:t}):u)+'" class="link '+(null!=(r=n.if.call(i,null!=e?e.selected:e,{name:"if",hash:{},fn:a.program(3,t,0),inverse:a.noop,data:t}))?r:"")+" "+(null!=(r=n.if.call(i,null!=e?e.hiddenByDefault:e,{name:"if",hash:{},fn:a.program(5,t,0),inverse:a.noop,data:t}))?r:"")+'" tabindex="0"><a data-value="'+o("function"==typeof(u=null!=(u=n.value||(null!=e?e.value:e))?u:s)?u.call(i,{name:"value",hash:{},data:t}):u)+'">'+o("function"==typeof(u=null!=(u=n.name||(null!=e?e.name:e))?u:s)?u.call(i,{name:"name",hash:{},data:t}):u)+"</a></li>\n"},3:function(a,e,n,l,t){return"selected"},5:function(a,e,n,l,t){return"hidden"},7:function(a,e,n,l,t){return'\t\t\t<form action="/search" method="get" role="search">\n\t\t\t\t<input type="text" name="text" value="" class="search-field" autocomplete="off" aria-label="Search" role="textbox">\n\t\t\t\t<input type="submit" class="search-icon" tabindex="-1" aria-label="Search" role="button">\n\t\t\t</form>\n'},compiler:[7,">= 4.0.0"],main:function(a,e,n,l,t){var r,u=null!=e?e:{};return'<div class="fluid-modal-nav-bar">\n\t<div class="fluid-modal-nav-content">\n\t\t<ul class="links">\n'+(null!=(r=n.each.call(u,null!=e?e.links:e,{name:"each",hash:{},fn:a.program(1,t,0),inverse:a.noop,data:t}))?r:"")+"\t\t</ul>\n"+(null!=(r=n.if.call(u,null!=e?e.enableSearch:e,{name:"if",hash:{},fn:a.program(7,t,0),inverse:a.noop,data:t}))?r:"")+"\t</div>\n</div>\n"},useData:!0}),l={};a.Array.each([],function(e){var n=a.Template.get("hermes/"+e);n&&(l[e]=n)}),a.Template.register("hermes/fluid-modal-nav-bar",function(e,t){return t=t||{},t.partials=t.partials?a.merge(l,t.partials):l,n(e,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("fluid-modal-nav-bar-view",function(e){"use strict";var t;t={css:{nav:".fluid-modal-nav-bar",navContent:".fluid-modal-nav-content",links:".links",link:".link"},options:{}},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){var t,i,n=this.get("breakpointConfig")||[],a=this.appContext.viewportData.getWidth();if(this.appContext.flipper.isFlipped("enable-mobile-photoselector"))for(i=n.sort(function(e,t){return e.maxWidth-t.maxWidth}),t=0;t<i.length;t++)if(a<i[t].maxWidth){this.mobileConfig=i[t],this.set("links",this.mobileConfig.links),this.set("enableSearch",this.mobileConfig.enableSearch);break}return this},loadState:function(){return this},buildContainer:function(){var e;return e={links:this.get("links"),enableSearch:this.get("enableSearch")},this.setContainerWithTemplate("fluid-modal-nav-bar",e),this},activate:function(){var e=this.get("container"),t=this;return this.registerEventHandler(e.on("click",this.handleClick.bind(this))),this.registerEventHandler(e.on("key",this.handleClick.bind(this),"down:13")),this.get("links").forEach(function(i){i.selected&&t.set("currentSelection",e.one('.link[data-id="'+i.id+'"]'))}),this},deselectAll:function(){this.get("container").one(t.css.nav).one(t.css.navContent).one(t.css.links).all(t.css.link).removeClass("selected")},handleClick:function(t){var i,n,a=t.target,s=a.get("parentNode"),l=this.get("container"),r={},o=this.appContext.getViewer().nsid;"a"===a.getDOMNode().tagName.toLowerCase()?(t.halt(),this.deselectAll(),s.addClass("selected"),this.set("currentSelection",s),(i=l.one(".search-field"))&&(i.getDOMNode().value=""),this.fire("subviewViewEvent","navigation",t)):a.hasClass("link")?(t.halt(),this.deselectAll(),a.addClass("selected"),this.set("currentSelection",a),(i=l.one(".search-field"))&&(i.getDOMNode().value=""),this.fire("subviewViewEvent","navigation",t)):(i=l.one(".search-field"),this.get("enableSearch")&&i&&(n=l.one(".search-field").getDOMNode(),"submit"===a.getDOMNode().type&&(t.halt(),r.apiParams={},r.apiParams[e.AttributeHelpers.coerceString(n.name)]=n.value,r.id=e.SearchHelper.generateQueryString(r.apiParams)||e.guid(),r.viewerNsid=o,this.fire("subviewViewEvent","search",r),this.deselectAll(),this.set("currentSelection",{type:"search",modelParams:r}))))},onParentViewEvent:function(t,i){var n=this.get("currentSelection");"backToList"===i[0]&&(n instanceof e.Node?this.get("currentSelection").getDOMNode().click():"search"===n.type&&this.fire("subviewViewEvent","search",n.modelParams))}},{ATTRS:{links:{value:[],validator:function(t){return e.Lang.isArray(t)}},currentSelection:{value:null},enableSearch:{value:!0,validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},breakpointConfig:{value:null}}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-fluid-modal-nav-bar","attribute-helpers","search-helper"],langBundles:["common","wallart"],optional:["person-models","photo-models"]});YUI.add("hermes-template-mega-limit-overlay",function(e,i){var a=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,i,a,t,s){return'<div class="mega-limit-overlay">\n\t<div class="top-flickr-logo">\n\t\t<svg class="icon icon-flickr_logo"><use xlink:href="#icon-flickr_logo"></use></svg>\n\t</div>\n\t<div class="first-image-card"></div>\n\t<div class="info-container">\n\t\t<div class="flickr-logo">\n\t\t\t<svg class="icon icon-flickr_logo"><use xlink:href="#icon-flickr_logo"></use></svg>\n\t\t</div>\n\t\t<div class="info-message-container"></div>\n\t</div>\n</div>\n'},useData:!0}),t={};e.Array.each([],function(i){var a=e.Template.get("hermes/"+i);a&&(t[i]=a)}),e.Template.register("hermes/mega-limit-overlay",function(i,s){return s=s||{},s.partials=s.partials?e.merge(t,s.partials):t,a(i,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-mega-limit-overlay-message",function(e,a){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,a,n,t,l){var s,r=null!=a?a:{},i=n.helperMissing,p=e.escapeExpression;return"<h1>"+p((n.intlMessage||a&&a.intlMessage||i).call(r,{name:"intlMessage",hash:{username:null!=a?a.username:a,intlName:"common.HI_MESSAGE_GREETING"},data:l}))+"</h1>\n<p>\n\t"+p((n.preventOrphans||a&&a.preventOrphans||i).call(r,(n.intlHTMLMessage||a&&a.intlHTMLMessage||i).call(r,{name:"intlHTMLMessage",hash:{photoCountString:null!=a?a.overLimitCountString:a,rulesUrl:null!=a?a.rulesUrl:a,intlName:"upload-blocking.LIKE_TO_KEEP_YOUR_PHOTOS"},data:l}),{name:"preventOrphans",hash:{},data:l}))+'\n</p>\n<div class="button-container">\n\t<a role="button" class="button unfluid accept-button" href="'+p("function"==typeof(s=null!=(s=n.acceptUrl||(null!=a?a.acceptUrl:a))?s:i)?s.call(r,{name:"acceptUrl",hash:{},data:l}):s)+'">\n\t\t'+p((n.preventOrphans||a&&a.preventOrphans||i).call(r,(n.intlMessage||a&&a.intlMessage||i).call(r,{name:"intlMessage",hash:{intlName:"upload-blocking.JOIN_FLICKR_PRO"},data:l}),{name:"preventOrphans",hash:{},data:l}))+'\n\t</a>\n\t<button class="button unfluid alt decline-button">\n\t\t'+p((n.preventOrphans||a&&a.preventOrphans||i).call(r,(n.intlMessage||a&&a.intlMessage||i).call(r,{name:"intlMessage",hash:{intlName:"upload-blocking.DONT_SAVE_MY_PHOTOS"},data:l}),{name:"preventOrphans",hash:{},data:l}))+"\n\t</button>\n</div>\t\n"},useData:!0}),t={};e.Array.each([],function(a){var n=e.Template.get("hermes/"+a);n&&(t[a]=n)}),e.Template.register("hermes/mega-limit-overlay-message",function(a,l){return l=l||{},l.partials=l.partials?e.merge(t,l.partials):t,n(a,l)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("photo-list-subview",function(e,t){var r=require("hermes-core/type-validator"),o=require("hermes-core/flog")(t);e.namespace("Views")[this.name]=e.PhotoListSubview=e.Base.create(this.name,e.FlickrView,[],{downloadCacheAndSetImage:function(){e.fluid.loadImage(this.get("photoUrl"),{timeout:1e3,retry:!0}).then(function(e){this.handleImageLoad(!0,e)}.bind(this),function(e){this.handleImageLoad(!1,e+"?retry="+Date.now())}.bind(this))},handleImageLoad:function(t,r){var o=this.get("photoContainer");o.setStyle("backgroundImage","url("+r+")"),t||o.setStyle("backgroundColor","#eee"),this.get("model").getValue("needsInterstitial")&&o.addClass("restricted-image"),e.fluid.chill(function(){this.fire(t?"loaded":"loadError")},this)},updateGeometry:function(e){e?this.set("layoutItem",e):e=this.get("layoutItem"),this.updateNodeGeometry(e,this.get("container"))},updateNodeGeometry:function(t,r){YUI.Env.isServer?r.setStyles({transform:"translate("+t.geometry.left+"px, "+t.geometry.top+"px)","-webkit-transform":"translate("+t.geometry.left+"px, "+t.geometry.top+"px)","-ms-transform":"translate("+t.geometry.left+"px, "+t.geometry.top+"px)"}):e.fluid.setStylePrefixed("transform","translate("+t.geometry.left+"px, "+t.geometry.top+"px)",r),t.forcedAspectRatio&&r.addClass("forced-aspect-ratio"),r.setStyles({width:t.geometry.width+"px",height:t.geometry.height+"px"})}},{ATTRS:{id:{writeOnce:"initOnly",validator:function(e,t){return r.photoId(e)}},layoutItem:{validator:function(e,t){return"object"==typeof e&&e.hasOwnProperty("aspectRatio")&&e.hasOwnProperty("geometry")&&"object"==typeof e.geometry&&e.geometry.hasOwnProperty("width")&&e.geometry.hasOwnProperty("height")&&e.geometry.hasOwnProperty("top")&&e.geometry.hasOwnProperty("left")&&e.hasOwnProperty("isAwake")}},listModelParams:{writeOnce:"initOnly"},photoUrl:{value:"/images/spaceball.gif",getter:function(e,t){var r=this.get("model"),o=this.get("layoutItem");return r.getSizeToFit({width:o.geometry.width*this.get("photoContainerSize"),height:o.geometry.height*this.get("photoContainerSize")},{includeSquare:!1}).url}},linkedPageUrl:{writeOnce:!0,validator:function(t,r){return e.AttributeHelpers.validateString(t)}},model:{value:null},photoContainer:{readOnly:!0,derivedBy:["container"],getter:function(e){return YUI.Env.isServer?(o.warn("Cannot access photoContainer on the server; set values in the template instead. Falling back to view container."),this.get("container")):this.get("container").one(".photo")}},photoContainerSize:{value:1},measureAFT:{value:!1,validator:function(t,r){return e.AttributeHelpers.validateBoolean(t)}}}})},"@VERSION@",{requires:["flickr-view","attribute-helpers"],optionalRequires:["fluid"]});YUI.add("hermes-template-pro-badge",function(n,a){var e=n.Template.Handlebars.revive({1:function(n,a,e,l,r){var s;return null!=(s=(e.ifCond||a&&a.ifCond||e.helperMissing).call(null!=a?a:{},null!=a?a.badgeType:a,"===","legacy",{name:"ifCond",hash:{},fn:n.program(2,r,0),inverse:n.program(15,r,0),data:r}))?s:""},2:function(n,a,e,l,r){var s,i=null!=a?a:{};return"\t\t<a "+(null!=(s=e.if.call(i,null!=a?a.noLink:a,{name:"if",hash:{},fn:n.noop,inverse:n.program(3,r,0),data:r}))?s:"")+' class="pro-badge-new pro-badge-legacy'+(null!=(s=e.if.call(i,null!=a?a.noLink:a,{name:"if",hash:{},fn:n.program(5,r,0),inverse:n.noop,data:r}))?s:"")+(null!=(s=e.if.call(i,null!=a?a.light:a,{name:"if",hash:{},fn:n.program(7,r,0),inverse:n.noop,data:r}))?s:"")+(null!=(s=e.if.call(i,null!=a?a.extraClasses:a,{name:"if",hash:{},fn:n.program(9,r,0),inverse:n.noop,data:r}))?s:"")+'" title="'+n.escapeExpression((e.intlMessage||a&&a.intlMessage||e.helperMissing).call(i,{name:"intlMessage",hash:{intlName:"common.FLICKR_LOVES_OLD_SCHOOL_PROS"},data:r}))+'">\n'+(null!=(s=e.if.call(i,null!=a?a.light:a,{name:"if",hash:{},fn:n.program(11,r,0),inverse:n.program(13,r,0),data:r}))?s:"")+"\t\t</a>\n"},3:function(n,a,e,l,r){return'href="/account/upgrade/pro"'},5:function(n,a,e,l,r){return" no-link"},7:function(n,a,e,l,r){return" light"},9:function(n,a,e,l,r){var s;return" "+n.escapeExpression("function"==typeof(s=null!=(s=e.extraClasses||(null!=a?a.extraClasses:a))?s:e.helperMissing)?s.call(null!=a?a:{},{name:"extraClasses",hash:{},data:r}):s)},11:function(n,a,e,l,r){return'\t\t\t\t<svg class="icon icon-old-pro-badge"><use xlink:href="#icon-old-pro-badge-colorless"></use></svg>\n'},13:function(n,a,e,l,r){return'\t\t\t\t<svg class="icon icon-old-pro-badge-color"><use xlink:href="#icon-old-pro-badge"></use></svg>\n'},15:function(n,a,e,l,r){var s,i=null!=a?a:{};return"\t\t<a "+(null!=(s=e.if.call(i,null!=a?a.noLink:a,{name:"if",hash:{},fn:n.noop,inverse:n.program(3,r,0),data:r}))?s:"")+' class="pro-badge-new'+(null!=(s=e.if.call(i,null!=a?a.noLink:a,{name:"if",hash:{},fn:n.program(5,r,0),inverse:n.noop,data:r}))?s:"")+(null!=(s=e.if.call(i,null!=a?a.light:a,{name:"if",hash:{},fn:n.program(7,r,0),inverse:n.noop,data:r}))?s:"")+(null!=(s=e.if.call(i,null!=a?a.extraClasses:a,{name:"if",hash:{},fn:n.program(9,r,0),inverse:n.noop,data:r}))?s:"")+'">\n\t\t\t<svg class="icon icon-pro-badge"><use xlink:href="#icon-pro-badge"></use></svg>\n\t\t</a>\n'},17:function(n,a,e,l,r){var s;return'\t<a href="/account/upgrade/pro" class="pro-badge-inline'+(null!=(s=e.if.call(null!=a?a:{},null!=a?a.extraClasses:a,{name:"if",hash:{},fn:n.program(9,r,0),inverse:n.noop,data:r}))?s:"")+'">PRO</a>\n'},compiler:[7,">= 4.0.0"],main:function(n,a,e,l,r){var s;return null!=(s=(e.isFlipped||a&&a.isFlipped||e.helperMissing).call(null!=a?a:{},"enable-pro-badge-toggle",{name:"isFlipped",hash:{},fn:n.program(1,r,0),inverse:n.program(17,r,0),data:r}))?s:""},useData:!0}),l={};n.Array.each([],function(a){var e=n.Template.get("hermes/"+a);e&&(l[a]=e)}),n.Template.register("hermes/pro-badge",function(a,r){return r=r||{},r.partials=r.partials?n.merge(l,r.partials):l,e(a,r)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-comment-item-view",function(t,n){var a=t.Template.Handlebars.revive({1:function(t,n,a,e,l){var r,s=t.lambda,i=t.escapeExpression;return'\t<a class="avatar person tiny no-menu" style="background-image: url('+i(s(null!=(r=null!=(r=null!=n?n.author:n)?r.buddyicon:r)?r.default:r,n))+');" href="/photos/'+i(s(null!=(r=null!=n?n.author:n)?r.pathAlias:r,n))+'/"></a>\n'},3:function(t,n,a,e,l){var r,s=t.lambda,i=t.escapeExpression;return'\t<a class="avatar person tiny no-menu" style="background-image: url('+i(s(null!=(r=null!=n?n.author:n)?r.buddyicon:r,n))+');" href="/photos/'+i(s(null!=(r=null!=n?n.author:n)?r.pathAlias:r,n))+'/"></a>\n'},5:function(t,n,a,e,l){var r,s=t.escapeExpression;return'\t\t\t\t\t<span class="deleted">'+s(t.lambda(null!=(r=null!=n?n.author:n)?r.displayname:r,n))+" ("+s((a.intlMessage||n&&n.intlMessage||a.helperMissing).call(null!=n?n:{},{name:"intlMessage",hash:{intlName:"common.DELETED_USER"},data:l}))+")</span>\n"},7:function(t,n,a,e,l){var r,s=t.lambda,i=t.escapeExpression;return'\t\t\t\t\t<a href="/photos/'+i(s(null!=(r=null!=n?n.author:n)?r.pathAlias:r,n))+'/" class="author-name" >'+i(s(null!=(r=null!=n?n.author:n)?r.displayname:r,n))+"</a>\n"},9:function(t,n,a,e,l){var r;return null!=(r=t.invokePartial(e["pro-badge"],n,{name:"pro-badge",hash:{badgeType:null!=(r=null!=n?n.author:n)?r.proBadge:r},data:l,indent:"\t\t\t\t\t",helpers:a,partials:e,decorators:t.decorators}))?r:""},11:function(t,n,a,e,l){return t.escapeExpression((a.intlMessage||n&&n.intlMessage||a.helperMissing).call(null!=n?n:{},{name:"intlMessage",hash:{time:null!=n?n.time:n,intlName:null!=n?n.intlName:n},data:l}))},13:function(t,n,a,e,l){var r;return null!=(r=a.if.call(null!=n?n:{},null!=n?n.hasEditPrivileges:n,{name:"if",hash:{},fn:t.program(14,l,0),inverse:t.program(16,l,0),data:l}))?r:""},14:function(t,n,a,e,l){return'\t\t\t\t\t\t<a role="button" class="comment-action comment-action-menu-button" data-menutype="owner">\n\t\t\t\t\t\t\t<svg class="icon icon-more_horizontal"><use xlink:href="#icon-more_horizontal"></use></svg>\n\t\t\t\t\t\t</a>\n'},16:function(t,n,a,e,l){var r;return'\t\t\t\t\t\t\t<a role="button" class="comment-action comment-action-reply-button" data-action="reply" data-pathalias="'+t.escapeExpression(t.lambda(null!=(r=null!=n?n.author:n)?r.pathAlias:r,n))+'">\n\t\t\t\t\t\t\t\t<svg class="icon icon-comment_reply"><use xlink:href="#icon-comment_reply"></use></svg>\n\t\t\t\t\t\t\t</a>\n'+(null!=(r=a.if.call(null!=n?n:{},null!=n?n.hasOnlyDeletePrivileges:n,{name:"if",hash:{},fn:t.program(17,l,0),inverse:t.noop,data:l}))?r:"")},17:function(t,n,a,e,l){return'\t\t\t\t\t\t\t\t<a role="button" class="comment-action comment-action-menu-button" data-menutype="curator">\n\t\t\t\t\t\t\t\t\t<svg class="icon icon-more_horizontal"><use xlink:href="#icon-more_horizontal"></use></svg>\n\t\t\t\t\t\t\t\t</a>\n'},19:function(t,n,a,e,l){var r;return'\t\t\t\t\t<a role="button" class="comment-action comment-action-reply-button" data-action="reply" data-pathalias="'+t.escapeExpression(t.lambda(null!=(r=null!=n?n.author:n)?r.pathAlias:r,n))+'">\n\t\t\t\t\t\t<svg class="icon icon-comment_reply"><use xlink:href="#icon-comment_reply"></use></svg>\n\t\t\t\t\t</a>\n'},compiler:[7,">= 4.0.0"],main:function(t,n,a,e,l){var r,s,i=null!=n?n:{},o=a.helperMissing,u=t.escapeExpression;return'<div class="comment-item" data-id="'+u("function"==typeof(s=null!=(s=a.id||(null!=n?n.id:n))?s:o)?s.call(i,{name:"id",hash:{},data:l}):s)+'">\n\n'+(null!=(r=a.if.call(i,null!=(r=null!=(r=null!=n?n.author:n)?r.buddyicon:r)?r.default:r,{name:"if",hash:{},fn:t.program(1,l,0),inverse:t.program(3,l,0),data:l}))?r:"")+'\n\t<div class="content-container">\n\t\t<header>\n\t\t\t<div class="author-info">\n'+(null!=(r=a.if.call(i,null!=(r=null!=n?n.author:n)?r.isDeleted:r,{name:"if",hash:{},fn:t.program(5,l,0),inverse:t.program(7,l,0),data:l}))?r:"")+"\n"+(null!=(r=a.if.call(i,null!=(r=null!=n?n.author:n)?r.isPro:r,{name:"if",hash:{},fn:t.program(9,l,0),inverse:t.noop,data:l}))?r:"")+'\n\t\t\t\t<span class="comment-date">'+(null!=(r=(a.friendlySinceDate||n&&n.friendlySinceDate||o).call(i,null!=n?n.timeago:n,!0,!1,{name:"friendlySinceDate",hash:{},fn:t.program(11,l,0),inverse:t.noop,data:l}))?r:"")+'</span>\n\t\t\t</div>\n\n\t\t\t<div class="comment-actions">\n'+(null!=(r=a.if.call(i,null!=n?n.isSignedIn:n,{name:"if",hash:{},fn:t.program(13,l,0),inverse:t.program(19,l,0),data:l}))?r:"")+'\n\t\t\t</div>\n\t\t</header>\n\n\t\t<div class="comment-content">'+u((a.renderTrustedMarkupWithLineBreaks||n&&n.renderTrustedMarkupWithLineBreaks||o).call(i,null!=n?n.contentSecure:n,{name:"renderTrustedMarkupWithLineBreaks",hash:{},data:l}))+"</div>\n\t</div>\n</div>\n"},usePartial:!0,useData:!0}),e={};t.Array.each(["pro-badge"],function(n){var a=t.Template.get("hermes/"+n);a&&(e[n]=a)}),t.Template.register("hermes/comment-item-view",function(n,l){return l=l||{},l.partials=l.partials?t.merge(e,l.partials):e,a(n,l)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-pro-badge"]});